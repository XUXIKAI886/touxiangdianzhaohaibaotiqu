# 使用说明

## 快速开始

### 1. 安装依赖

在项目目录下运行:

```bash
npm install
```

或者直接双击 `start.bat` 文件(Windows)。

### 2. 配置 Fiddler

确保 Fiddler 已经配置好,并且将抓取的数据保存到:
```
E:\美团外卖数据\latest_poi_food.json
```

详细的 Fiddler 配置步骤请参考 `提取店铺图片教程.md`。

### 3. 启动应用

```bash
npm run dev
```

应用将在 [http://localhost:3000](http://localhost:3000) 启动。

### 4. 使用监控功能

1. 打开浏览器访问 `http://localhost:3000`
2. 点击"开始监控"按钮
3. 在手机美团 APP 中浏览不同店铺
4. Fiddler 会自动抓取数据并保存
5. Web 应用会自动检测文件更新并显示图片

## 功能说明

### 监控面板

- **开始监控**: 开始检测 JSON 文件更新(每2秒检查一次)
- **停止监控**: 停止文件监控

### 店铺信息区

显示当前处理的店铺信息:
- 店铺名称
- 店铺 ID
- 更新时间

### 运行日志

实时显示程序运行状态:
- 🔵 蓝色: 一般信息
- 🟢 绿色: 成功信息
- 🟡 黄色: 警告信息
- 🔴 红色: 错误信息

### 图片预览区

实时显示提取的图片:
- **店铺头像**: 300x300 显示尺寸
- **店铺店招**: 宽幅显示
- **店铺海报**: 显示第一张海报

## 常见问题

### Q: 为什么没有检测到文件更新?

A: 请检查:
1. Fiddler 是否正常运行
2. Fiddler 脚本是否正确配置
3. JSON 文件路径是否正确
4. 是否点击了"开始监控"按钮

### Q: 图片无法显示怎么办?

A: 请检查:
1. 店铺是否真的有该图片(有些店铺没有店招或海报)
2. 图片 URL 是否可以访问
3. 浏览器控制台是否有错误信息

### Q: 如何修改 JSON 文件路径?

A: 编辑以下文件:
- `app/api/check-update/route.ts`
- `app/api/extract-images/route.ts`

修改这一行:
```typescript
const jsonFilePath = path.join(process.cwd(), '..', 'latest_poi_food.json')
```

改为你的实际路径。

### Q: 如何部署到服务器?

A: 有多种部署方式:

**Vercel (推荐):**
1. 将代码推送到 GitHub
2. 在 Vercel 导入项目
3. 自动部署完成

**GitHub Pages:**
1. 推送代码到 GitHub
2. GitHub Actions 会自动部署

**自建服务器:**
```bash
npm run build
npm start
```

## 技术支持

如有问题,请:
1. 查看浏览器控制台错误
2. 查看服务器终端日志
3. 提交 GitHub Issue

## 与 Python 版本的对比

| 功能 | Python 版本 | Next.js 版本 |
|------|------------|-------------|
| 界面 | 桌面应用 (tkinter) | Web 应用 (浏览器) |
| 部署 | 需要本地安装 Python | 可部署到云端 |
| 跨平台 | Windows/Mac/Linux | 任何有浏览器的设备 |
| 实时监控 | ✅ | ✅ |
| 图片预览 | ✅ | ✅ |
| 图片保存 | ✅ (本地文件夹) | ❌ (仅预览) |
| 移动端支持 | ❌ | ✅ |

## 下一步计划

- [ ] 添加图片下载功能
- [ ] 支持历史记录查看
- [ ] 添加多店铺对比功能
- [ ] 优化移动端体验
- [ ] 添加暗色/亮色主题切换
